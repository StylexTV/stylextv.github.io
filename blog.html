<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GitHub ReadMe | Blog</title>
	
	<link rel="stylesheet" href="style_blog.css">
	
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">
</head>

<body>
    <div id="light-scheme-icon">
		<link rel="apple-touch-icon" sizes="180x180" href="favicons/light/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="favicons/light/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="favicons/light/favicon-16x16.png">
		<link rel="mask-icon" href="favicons/light/safari-pinned-tab.svg" color="#ffffff">
	</div>
	<div id="dark-scheme-icon">
		<link rel="apple-touch-icon" sizes="180x180" href="favicons/dark/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="favicons/dark/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="favicons/dark/favicon-16x16.png">
		<link rel="mask-icon" href="favicons/dark/safari-pinned-tab.svg" color="#ffffff">
	</div>
	
	<a hidden href="" id="post-template"><div class="post-container" onmousedown="return false";>
		<div class="post-container-bottom">
			<div class="post-container-shadow"></div>
		    <div style="margin-left: 50px; z-index: 0;">
			    <h1 class="post-title"></h1>
			    <p class="post-p"></p>
			    <p class="post-p2"><img src='assets/blog/icons/calender.png'></img></p>
		    </div>
			
		</div>
	</div></a>
	
    <div style="display: none" id="hideAll">&nbsp;</div>
	
	<div id="header">
	    <div id="header-container">
	        <div id="header-pages-container">
			    <div class="header-page-icon"><a href="/"><img src="/assets/icons/lightning.png" style="width: 40px; height: 40px;"></img></a></div>
			    <div class="header-page-container"><a href="/portfolio" class="header-page">Portfolio</a></div>
			    <div class="header-page-container"><a href="/blog" class="header-page" style="border-bottom: 2px solid currentColor;">Blog</a></div>
			    <div class="header-page-container"><a href="/about" class="header-page">About</a></div>
			</div>
	        <div id="header-social-container">
			    <div class="header-social"><a href="https://twitter.com"><img src="/assets/icons/twitter.png" style="width: 32px; height: 32px;"></img></a></div>
			    <div class="header-social"><a href="https://github.com/StylexTV"><img src="/assets/icons/github.png" style="width: 32px; height: 32px;"></img></a></div>
			</div>
	    </div>
	</div>
	
	<div id="center">
	    <div id="posts-container"></div>
	</div>
	
    <script type="text/javascript">
        document.getElementById("hideAll").style.display = "block";
		
	    window.onload = function() {
		    setupPosts();
		    document.getElementById("hideAll").style.display = "none";
		}
		
	    function setupIcons() {
            const lightSchemeIcon = document.querySelector('div#light-scheme-icon');
            const darkSchemeIcon = document.querySelector('div#dark-scheme-icon');
			
            function setLight() {
                darkSchemeIcon.remove();
                document.head.append(lightSchemeIcon);
            }
			
            function setDark() {
                lightSchemeIcon.remove();
                document.head.append(darkSchemeIcon);
            }
			
            const matcher = window.matchMedia('(prefers-color-scheme:dark)');
            function onUpdate() {
                if (matcher.matches) {
                    setDark();
                } else {
                    setLight();
                }
            }
            matcher.addListener(onUpdate);
            onUpdate();
        }
        setupIcons();
		
	    function setupPosts() {
            const postTemplate = document.querySelector('a#post-template');
            const postsContainer = document.querySelector('div#posts-container');
			var posts;
			var loadedPagesUntil = 0;
			
		    function addObject(source) {
			    
			    const clone = postTemplate.cloneNode(true);
				const container = clone.childNodes[0];
			    const textContainer = container.childNodes[1].childNodes[3];
			    const title = textContainer.childNodes[1];
			    const description = textContainer.childNodes[3];
			    const dateLabel = textContainer.childNodes[5];
			    
		    	var split = source.split(";;");
		    	const id = split[0];
		    	
		    	var unixTime = parseInt(split[3]);
		    	// Create a new JavaScript Date object based on the timestamp
		    	// multiplied by 1000 so that the argument is in milliseconds, not seconds.
		    	var date = new Date(unixTime*1000);
		    	var hours = "0" + date.getHours();
		    	// Minutes part from the timestamp
		    	var minutes = "0" + date.getMinutes();
		    	// Will display time in 10:30:23 format
		    	var formattedTime = " " + date.getUTCDate() + '.' + (date.getUTCMonth()+1) + '.' + date.getUTCFullYear()+" @ "+hours.substr(-2)+":"+minutes.substr(-2)+" - Updated ";
		    	
		    	var now = new Date();
		    	const diffTime = Math.abs(now - date) / 1000;
		    	if(diffTime<10) formattedTime = formattedTime+"just now";
		    	else if(diffTime<60) {
					var number = Math.floor(diffTime);
				    var unit = "seconds";
					if(number == 1) unit = "second";
					formattedTime = formattedTime+number+" "+unit+" ago";
		    	} else if(diffTime<60*60) {
					var number = Math.floor(diffTime/60);
				    var unit = "minutes";
					if(number == 1) unit = "minute";
					formattedTime = formattedTime+number+" "+unit+" ago";
		    	} else if(diffTime<60*60*24) {
					var number = Math.floor(diffTime/60/60);
					var unit = "hours";
					if(number == 1) unit = "hour";
					formattedTime = formattedTime+number+" "+unit+" ago";
		    	} else if(diffTime<60*60*24*30.4167) {
					var number = Math.floor(diffTime/60/60/24);
				    var unit = "days";
					if(number == 1) unit = "day";
					formattedTime = formattedTime+number+" "+unit+" ago";
		    	} else if(diffTime<60*60*24*30.4167*12) {
					var number = Math.floor(diffTime/60/60/24/30.4167);
					var unit = "months";
					if(number == 1) unit = "month";
					formattedTime = formattedTime+number+" "+unit+" ago";
		    	} else {
					var number = now.getUTCFullYear()-date.getUTCFullYear();
			        var unit = "years";
					if(number == 1) unit = "year";
					formattedTime = formattedTime+number+" "+unit+" ago";
				}
		    	
		    	container.style.backgroundImage = "url('blog/"+id+"/cover.jpg')";
		    	title.innerText = "ðŸ“° "+split[1];
			   	description.innerText = split[2];
			    dateLabel.innerHTML = dateLabel.innerHTML+formattedTime;
			    
				clone.removeAttribute("hidden");
				clone.href = "blog/"+id;
                postsContainer.append(clone);
			}
			
			var request = new XMLHttpRequest();
            request.open('GET', 'blog/list.txt', true);
            request.send(null);
            request.onreadystatechange = function () {
                if(request.readyState === 4 && request.status === 200) {
                    var type = request.getResponseHeader('Content-Type');
                    if(type.indexOf("text") !== 1) {
					    posts = request.responseText.split("\n");
						for(var i = 0; i < 15; i++) {
							if(loadedPagesUntil >= posts.length) break;
							
						    addObject(posts[posts.length - 1 - loadedPagesUntil]);
							loadedPagesUntil++;
						}
			            window.addEventListener('scroll', function() {
                            if(window.pageYOffset + window.innerHeight >= document.body.clientHeight && loadedPagesUntil < posts.length) {
						        for(var i = 0; i < 15; i++) {
								    if(loadedPagesUntil >= posts.length) break;
									
						            addObject(posts[posts.length - 1 - loadedPagesUntil]);
									loadedPagesUntil++;
						        }
				            }
                        });
                    }
                }
			}
			
        }
		
    </script>
</body>
</html>